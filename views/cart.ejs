<%- include('./partials/header') %>
    <% const totalAmount=user.cart.reduce((sum, product)=> sum + product.price, 0 );
        const totalDiscount = user.cart.reduce((sum, product)=> sum + product.discount, 0 );
        const totalPayable = totalAmount - totalDiscount + 20;
        %>

        <% if( user.cart.length> 0){ %>
            <div class="w-full h-screen flex items-start justify-between px-20 py-20">
                <div class="w-3/12 rounded-md overflow-hidden flex flex-col">
                    <%user.cart.forEach((item)=>{%>
                        <div class="h-full m-2 bg-gray-200">
                            <div class="">
                                <img src="data:image/jpeg;base64, <%= item.image.toString('base64') %>" alt="">
                            </div>
                            <div class="w-full flex justify-between px-5 py-4">
                                <h3 class="text-xl">
                                    <%=item.name%>
                                </h3>

                            </div>
                        </div>
                        <%})%>
                </div>
                <div class=" w-7/12 fixed end-8">
                    <h3 class="text-xl">Price Breakdown</h3>
                    <div class="px-10 mt-5">
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Total MRP</h4>
                            <h4>₹ <%= totalAmount %>
                            </h4>
                        </div>
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Discount on MRP</h4>
                            <h4>₹ <%= totalDiscount %>
                            </h4>
                        </div>
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Platform Fee</h4>
                            <h4>₹ 20</h4>
                        </div>
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Shipping Fee</h4>
                            <h4>FREE</h4>
                        </div>
                    </div>
                    <div class="w-5/6 h-[1px] bg-black mt-10"></div>
                    <div class="flex mt-5">
                        <h3 class="w-1/3 text-xl">Total Amount</h3>
                        <h3 class="font-semibold text-xl text-green-600">₹ <%= totalPayable %>
                        </h3>
                    </div>
                    <div class="mt-10 w-full px-10 ">
                        <a class="px-20 py-3 bg-blue-400 text-white rounded-full active:scale-90"
                            href="/cart/placeOrder">Place
                            Order</a>
                    </div>
                </div>
            </div>

            <% }else{ %>
                <div class="h-screen flex flex-col justify-center items-center text-gray-500">
                    <p class="text-lg">You Have No Items In Cart</p>
                    <a href="/shop">Continue Shopping</a>
                </div>
                <% } %>
                    <%- include('./partials/footer') %>